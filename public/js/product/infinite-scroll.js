(()=>{var e=document.getElementById("filter-form"),n=document.getElementById("product-list"),t=document.getElementById("pagination"),r=document.getElementById("no-products"),o=!1;window.addEventListener("scroll",(function(){var n=window.scrollY+window.innerHeight,r=document.documentElement.scrollHeight-100;n>=r&&!o&&function(){var n=new FormData(e),r=t.querySelector('a[rel="next"]');if(r){var o=r.getAttribute("href").split("page=")[1];n.set("page",o),i(n,!0)}}()}));var i=function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];o=!0,fetch("/?".concat(new URLSearchParams(e).toString())).then((function(e){return e.text()})).then((function(e){return function(e,i){var c=(new DOMParser).parseFromString(e,"text/html"),a=c.querySelector("#product-list"),l=c.querySelector("#pagination");a&&a.innerHTML.trim()?(!function(e,t){t?n.insertAdjacentHTML("beforeend",e):n.innerHTML=e;initializeImageNavigation()}(a.innerHTML,i),t.innerHTML=l.innerHTML,r.style.display="none"):(n.innerHTML="",r.style.display="block");o=!1}(e,i)})).catch(c)};function c(e){console.error("Error loading products:",e),o=!1}window.fetchProducts=i})();